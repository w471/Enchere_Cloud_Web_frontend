{"ast":null,"code":"var _jsxFileName = \"E:\\\\Sandratra\\\\ITU\\\\S5\\\\Gestion_entreprise\\\\Achat_vente-Tovo2-\\\\frontend\\\\src\\\\View\\\\Page\\\\demandeProforma\\\\envoye_demande.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport Info_proforma from \"./info\";\nimport Table_checkbox from \"./table\";\nimport Checkbox_btn from \"./Checkbox_btn\";\nimport Add_fournisseur from \"./add_fournisseur\";\nimport Header from \"../../Template/Appro/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Envoye_demande(_ref) {\n  _s();\n  let {\n    list\n  } = _ref;\n  const [listes_article_fixed, setArticles_fixed] = useState([]);\n  const [fournisseurs_all, setFournisseurs_all] = useState([]);\n  const [demande_proforma, setDemande_proforma] = useState([]);\n  const navigate = useNavigate();\n  const HandleForm = event => {\n    var dateLivraison = date_livraison.current.value;\n    var lieuLivraison = lieu_livraison.current.value;\n    var articleDemande = [];\n    for (let i = 0; i < article_demande.current.length; i++) {\n      if (article_demande.current[i].checked) articleDemande.push({\n        article_fixed_id: article_demande.current[i].value\n      });\n    }\n    var fournisseurDemande = [];\n    for (let i = 0; i < fournisseur_demande.current.length; i++) {\n      fournisseurDemande.push({\n        idfournisseur: fournisseur_demande.current[i].value\n      });\n    }\n    var demandeProforma = {\n      demande_proformat: {\n        date_livraison: dateLivraison,\n        lieu_livraison: lieuLivraison\n      },\n      article_demande: articleDemande,\n      fournisseur_demande: fournisseurDemande,\n      idappro: 4\n    };\n    setDemande_proforma(demandeProforma);\n  };\n  useEffect(() => {\n    var content = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    content.body = JSON.stringify(demande_proforma);\n    fetch(\"http://127.0.0.1:3000/demandeProformat\", content).then(response => {\n      if (response.status === 400) {\n        alert(\"Erreur lors du demande de proforma\");\n      }\n      return response.json();\n    }).then(json => {\n      navigate('/email_interface', {\n        state: {\n          json\n        }\n      });\n    });\n  }, [demande_proforma]);\n  useEffect(() => {\n    var content = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    fetch(\"http://127.0.0.1:3000/giveDateDemandeProforma\", content).then(response => {\n      if (response.status === 400) {\n        alert(\"Erreur\");\n      } else return response.json();\n    }).then(json => {\n      setArticles_fixed(json.allArticleValides);\n      setFournisseurs_all(json.allFournisseurs);\n      // console.log(json.allArticleValides);\n      // console.log(json.allFournisseurs)\n    });\n  }, []);\n  const fournisseur_demande = useRef([]);\n  const article_demande = useRef([]);\n  const date_livraison = useRef();\n  const lieu_livraison = useRef();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"POST\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-md-8\",\n          children: [/*#__PURE__*/_jsxDEV(Info_proforma, {\n            date_livraison: date_livraison,\n            lieu_livraison: lieu_livraison\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Checkbox_btn, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-responsive\",\n            children: /*#__PURE__*/_jsxDEV(Table_checkbox, {\n              article_demande: article_demande,\n              listes_article_fixed: listes_article_fixed\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(Add_fournisseur, {\n            fournisseur_demande: fournisseur_demande,\n            all_fournisseurs: fournisseurs_all\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        style: {\n          \"marginTop\": \"20px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: HandleForm,\n          className: \"btn btn-success\",\n          children: \"Valider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n_s(Envoye_demande, \"SQqaek4OL/TVe672F8ZJ2rqprhE=\", true);\n_c = Envoye_demande;\nexport default Envoye_demande;\nvar _c;\n$RefreshReg$(_c, \"Envoye_demande\");","map":{"version":3,"names":["React","useRef","useState","useEffect","Info_proforma","Table_checkbox","Checkbox_btn","Add_fournisseur","Header","Envoye_demande","list","listes_article_fixed","setArticles_fixed","fournisseurs_all","setFournisseurs_all","demande_proforma","setDemande_proforma","navigate","useNavigate","HandleForm","event","dateLivraison","date_livraison","current","value","lieuLivraison","lieu_livraison","articleDemande","i","article_demande","length","checked","push","article_fixed_id","fournisseurDemande","fournisseur_demande","idfournisseur","demandeProforma","demande_proformat","idappro","content","method","headers","body","JSON","stringify","fetch","then","response","status","alert","json","state","allArticleValides","allFournisseurs"],"sources":["E:/Sandratra/ITU/S5/Gestion_entreprise/Achat_vente-Tovo2-/frontend/src/View/Page/demandeProforma/envoye_demande.js"],"sourcesContent":["\r\nimport React, { useRef, useState, useEffect } from \"react\";\r\n\r\nimport Info_proforma from \"./info\";\r\nimport Table_checkbox from \"./table\";\r\nimport Checkbox_btn from \"./Checkbox_btn\";\r\nimport Add_fournisseur from \"./add_fournisseur\";\r\nimport Header from \"../../Template/Appro/Header\";\r\n\r\n\r\n\r\nfunction Envoye_demande({ list }) {\r\n\r\n    const [listes_article_fixed, setArticles_fixed] = useState([]);\r\n    const [fournisseurs_all, setFournisseurs_all] = useState([]);\r\n    const [demande_proforma, setDemande_proforma] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n  const HandleForm = (event) => {\r\n\r\n    var dateLivraison=date_livraison.current.value;\r\n    var lieuLivraison=lieu_livraison.current.value;\r\n\r\n    var articleDemande=[]\r\n    for (let i = 0; i < article_demande.current.length; i++) {\r\n      \r\n      if(article_demande.current[i].checked)\r\n        articleDemande.push({article_fixed_id: article_demande.current[i].value})\r\n      \r\n    }\r\n\r\n    var fournisseurDemande=[]\r\n    for (let i = 0; i < fournisseur_demande.current.length; i++) {\r\n\r\n      fournisseurDemande.push({idfournisseur: fournisseur_demande.current[i].value})\r\n      \r\n    }\r\n\r\n    var demandeProforma={demande_proformat: {date_livraison: dateLivraison,lieu_livraison: lieuLivraison},article_demande: articleDemande,fournisseur_demande: fournisseurDemande, idappro: 4}\r\n\r\n    setDemande_proforma(demandeProforma)\r\n\r\n\r\n  };\r\n\r\n  useEffect(()=>{\r\n\r\n    var content = {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    content.body = JSON.stringify(demande_proforma);\r\n\r\n\r\n      fetch(\"http://127.0.0.1:3000/demandeProformat\", content)\r\n      .then(\r\n        (response) => {\r\n          if (response.status === 400) {\r\n            alert(\"Erreur lors du demande de proforma\");\r\n          }\r\n          return response.json()\r\n        }\r\n      )\r\n      .then((json)=>{\r\n        navigate('/email_interface',{state:{json}})\r\n      })\r\n  },[demande_proforma])\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    var content = {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    fetch(\"http://127.0.0.1:3000/giveDateDemandeProforma\", content)\r\n      .then((response) => {\r\n        if (response.status === 400) {\r\n          alert(\"Erreur\");\r\n        } else return response.json();\r\n      })\r\n      .then((json) => {\r\n        setArticles_fixed(json.allArticleValides);\r\n        setFournisseurs_all(json.allFournisseurs);\r\n        // console.log(json.allArticleValides);\r\n        // console.log(json.allFournisseurs)\r\n      });\r\n  }, []);\r\n\r\n\r\n  const fournisseur_demande = useRef([]);\r\n  const article_demande = useRef([]);\r\n  const date_livraison = useRef();\r\n  const lieu_livraison=useRef();\r\n\r\n    return (\r\n        <div className=\"container\">\r\n\r\n      <Header />\r\n            <form method=\"POST\">\r\n                <div className=\"row\">\r\n                    <div className=\"col col-md-8\">\r\n\r\n                        <Info_proforma date_livraison={date_livraison} lieu_livraison={lieu_livraison} />\r\n\r\n                        <Checkbox_btn />\r\n\r\n                        <div className=\"table-responsive\">\r\n                            <Table_checkbox article_demande={article_demande} listes_article_fixed={listes_article_fixed} />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col col-md-4\">\r\n\r\n                        <Add_fournisseur fournisseur_demande={fournisseur_demande}  all_fournisseurs={fournisseurs_all}  />\r\n\r\n\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"row\" style={{ \"marginTop\": \"20px\" }}>\r\n                    <button type=\"button\" onClick={HandleForm} className=\"btn btn-success\">Valider</button>\r\n\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default Envoye_demande;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}