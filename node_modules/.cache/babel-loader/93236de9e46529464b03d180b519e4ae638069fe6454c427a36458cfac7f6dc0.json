{"ast":null,"code":"var _jsxFileName = \"E:\\\\Sandratra\\\\ITU\\\\S5\\\\Gestion_entreprise\\\\Achat_vente-Tovo2-\\\\frontend\\\\src\\\\View\\\\Page\\\\proforma\\\\Proforma.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport Header from '../../Template/Appro/Header';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar id_proforma = 1;\nfunction DropDown(props) {\n  const options = props.options;\n  const listItems = options.map((option, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n    value: option.value,\n    children: option.text\n  }, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"select\", {\n    className: \"form-control\",\n    ref: props.textinput,\n    children: listItems\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n}\n_c = DropDown;\nfunction ProformaHeader(props) {\n  _s();\n  const {\n    iddemande\n  } = useParams();\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:3000/fournisseurproformaM?iddemande=\" + iddemande).then(res => res.json()).then(result => {\n      setIsLoaded(true);\n      setItems(result);\n    },\n    // Note: it's important to handle errors here\n    // instead of a catch() block so that we don't swallow\n    // exceptions from actual bugs in components.\n    error => {\n      setIsLoaded(true);\n      setError(error);\n    });\n  }, []);\n  var fournisseurs = [];\n  items.map(element => {\n    const line = {\n      \"value\": element.idfournisseur,\n      \"text\": element.nom\n    };\n    fournisseurs.push(line);\n  });\n  var data_modeLivraison = [{\n    label: \"livraison en point relais\",\n    value: 1\n  }, {\n    label: \"livraison express\",\n    value: 2\n  }];\n  //console.log(items);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-md-6 col-sm-12 col-xs-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"x_panel\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"x_title\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Proforma \", /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"en t\\xEAte\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"clearfix\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"x_content\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              className: \"form-horizontal form-label-left\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-sm-9\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"col-sm-3 control-label\",\n                      children: \"reference\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 73,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      className: \"form-control\",\n                      ref: props.reference\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 74,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 72,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"col-sm-3 control-label\",\n                      children: \"fournisseur\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 77,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(DropDown, {\n                      options: fournisseurs,\n                      textinput: props.fournisseur\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 78,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"col-sm-3 control-label\",\n                      children: \"info livraison\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 81,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      className: \"form-control\",\n                      name: \"mode livraison\",\n                      ref: props.mode,\n                      children: data_modeLivraison.map((element, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: element.value,\n                        children: element.label\n                      }, index, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 88,\n                        columnNumber: 37\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 83,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"date\",\n                      className: \"form-control\",\n                      placeholder: \"date livraison\",\n                      ref: props.date\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 95,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      className: \"form-control\",\n                      placeholder: \"lieu livraison\",\n                      ref: props.lieu\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 31\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 27\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 7\n  }, this);\n}\n_s(ProformaHeader, \"2syit8YQ9aXSSq8Hj6tTmSN+mpg=\", false, function () {\n  return [useParams];\n});\n_c2 = ProformaHeader;\nfunction ProformaBody(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"Article\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 48\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"hidden\",\n            value: props.idarticle,\n            ref: props.articles_id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"text\",\n            value: props.article_label,\n            disabled: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"prix unitaire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 48\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"number\",\n            ref: props.prix_unit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 99\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"quantite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 48\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"number\",\n            defaultValue: props.qtt,\n            ref: props.quantite\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 94\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"form-label\",\n            children: \"qualite\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 48\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"text\",\n            defaultValue: props.qlt,\n            ref: props.qualite\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 93\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n_c3 = ProformaBody;\nfunction ProformaForm() {\n  _s2();\n  const {\n    iddemande\n  } = useParams();\n  const lieu_livraison = useRef(null);\n  const date_livraison = useRef(null);\n  const fournisseur = useRef(null);\n  const reference = useRef(null);\n  const mode_livraison = useRef(null);\n  const note_livraison = useRef(null);\n  const note_qualite = useRef(null);\n  const qualite = useRef([]);\n  const quantite = useRef([]);\n  const prix_unit = useRef([]);\n  const articles = useRef([]);\n  const idemploye = JSON.parse(sessionStorage.getItem('Appro'))[0].idemploye;\n  articles.current = [];\n  prix_unit.current = [];\n  qualite.current = [];\n  quantite.current = [];\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:3000/articlesproforma?iddemande=\" + iddemande).then(res => res.json()).then(result => {\n      setIsLoaded(true);\n      setItems(result);\n    },\n    // Note: it's important to handle errors here\n    // instead of a catch() block so that we don't swallow\n    // exceptions from actual bugs in components.\n    error => {\n      setIsLoaded(true);\n      setError(error);\n    });\n  }, []);\n  var elements = [];\n  items.map(element => {\n    const line = {\n      \"value\": element.idarticle_fixed,\n      \"text\": element.nom_article,\n      \"quantite\": element.qtt,\n      \"qualite\": element.qualite\n    };\n    elements.push(line);\n  });\n  function handlePrix(el) {\n    if (el && !prix_unit.current.includes(el)) {\n      prix_unit.current.push(el);\n    }\n  }\n  ;\n  function handleArticle(el) {\n    if (el && !articles.current.includes(el)) {\n      articles.current.push(el);\n    }\n  }\n  ;\n  function handleQuantite(el) {\n    if (el && !quantite.current.includes(el)) {\n      quantite.current.push(el);\n    }\n  }\n  ;\n  function handleQualite(el) {\n    if (el && !qualite.current.includes(el)) {\n      qualite.current.push(el);\n    }\n  }\n  ;\n  function handleEvent(event) {\n    /*const j =  {\"idproformat\":null,\"ref\":\"PROF1234\",\"date_livraison\":\"2022-11-20\",\"lieu_livraison\":\"Anjanahary\",\"mode_livraison_id\":2,\"iddemande_proforma\":1,\"idfournisseur\":1,\r\n    \"details_proforma\":[\r\n    {\"proformat_id\":1 ,\"articles_fixed_id\":1,\"pu\":11000 ,\"qtt\":5 ,\"qualite\":\"made in france\"},\r\n    {\"proformat_id\":1 ,\"articles_fixed_id\":2,\"pu\":12000 ,\"qtt\":5 ,\"qualite\":\"made in china\"}\r\n    ]\r\n    };*/\n    const header = {\n      idproformat: null,\n      idemploye: idemploye,\n      ref: reference.current.value,\n      date_livraison: date_livraison.current.value,\n      lieu_livraison: lieu_livraison.current.value,\n      mode_livraison_id: mode_livraison.current.value,\n      iddemande_proforma: iddemande,\n      idfournisseur: fournisseur.current.value,\n      details_proforma: [],\n      note_livraison: note_livraison.current.value,\n      note_qualite: note_qualite.current.value\n    };\n    const details = [];\n    for (let index = 0; index < articles.current.length; index++) {\n      const line = {\n        proformat_id: id_proforma,\n        articles_fixed_id: articles.current[index].value,\n        pu: prix_unit.current[index].value,\n        qtt: quantite.current[index].value,\n        qualite: qualite.current[index].value\n      };\n      details.push(line);\n    }\n    header.details_proforma = details;\n    console.log(header);\n    event.preventDefault();\n    var content = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    content.body = JSON.stringify(header);\n    fetch('http://127.0.0.1:3000/proforma', content).then(response => {\n      if (response.status === 400) {\n        alert(\"Failed\");\n      } else alert(\"Success\");\n    });\n    console.log(header);\n  }\n  ;\n\n  /* const HandleLogin=(event) =>{\r\n     event.preventDefault();\r\n     \r\n     var content= {\r\n         method: 'POST',\r\n         headers: {\r\n             'Content-Type': 'application/json'\r\n         }\r\n     }\r\n  \n     content.body=JSON.stringify({email:email.current.value,pwd:pwd.current.value})\r\n     fetch('http://127.0.0.1:3000/loginDepartement', content).then(response => {\r\n         if(response.status===400){\r\n             alert(\"Mot de passe non identifier\")\r\n         }else\r\n             return response.json()\r\n     })\r\n     .then(json => { setInfo_Employe(json) })\r\n  }*/\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(ProformaHeader, {\n        name: \"header\",\n        mode: mode_livraison,\n        reference: reference,\n        date: date_livraison,\n        lieu: lieu_livraison,\n        fournisseur: fournisseur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [elements.map((el, index) => {\n        return /*#__PURE__*/_jsxDEV(ProformaBody, {\n          idarticle: el.value,\n          article_label: el.text,\n          articles_id: handleArticle,\n          prix_unit: handlePrix,\n          qualite: handleQualite,\n          quantite: handleQuantite,\n          qtt: el.quantite,\n          qlt: el.qualite\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 21\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Notes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"note livraison\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 48\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"text\",\n              ref: note_livraison\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 100\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"note qualite\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 48\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              type: \"text\",\n              ref: note_qualite\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 98\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-sm-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"btn btn-primary\",\n          type: \"submit\",\n          value: \"valider\",\n          onClick: handleEvent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 273,\n    columnNumber: 7\n  }, this);\n}\n_s2(ProformaForm, \"vW6zkhpWfGDxyAo1OF1pd6XUrDw=\", false, function () {\n  return [useParams];\n});\n_c4 = ProformaForm;\nexport default ProformaForm;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"DropDown\");\n$RefreshReg$(_c2, \"ProformaHeader\");\n$RefreshReg$(_c3, \"ProformaBody\");\n$RefreshReg$(_c4, \"ProformaForm\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useParams","Header","id_proforma","DropDown","props","options","listItems","map","option","index","value","text","textinput","ProformaHeader","iddemande","error","setError","isLoaded","setIsLoaded","items","setItems","fetch","then","res","json","result","fournisseurs","element","line","idfournisseur","nom","push","data_modeLivraison","label","reference","fournisseur","mode","date","lieu","ProformaBody","idarticle","articles_id","article_label","prix_unit","qtt","quantite","qlt","qualite","ProformaForm","lieu_livraison","date_livraison","mode_livraison","note_livraison","note_qualite","articles","idemploye","JSON","parse","sessionStorage","getItem","current","elements","idarticle_fixed","nom_article","handlePrix","el","includes","handleArticle","handleQuantite","handleQualite","handleEvent","event","header","idproformat","ref","mode_livraison_id","iddemande_proforma","details_proforma","details","length","proformat_id","articles_fixed_id","pu","console","log","preventDefault","content","method","headers","body","stringify","response","status","alert"],"sources":["E:/Sandratra/ITU/S5/Gestion_entreprise/Achat_vente-Tovo2-/frontend/src/View/Page/proforma/Proforma.js"],"sourcesContent":["import React, { useRef, useState,useEffect } from 'react';\r\nimport { useParams } from 'react-router';\r\nimport Header from '../../Template/Appro/Header';\r\n\r\nvar id_proforma = 1;\r\n\r\nfunction DropDown(props){\r\n\r\n\r\n  const options = props.options;\r\n  const listItems = options.map((option,index) =>\r\n    <option key={index} value={option.value}>{option.text}</option>\r\n  );\r\n  return (\r\n    \r\n    <select className=\"form-control\" ref={props.textinput}>{listItems}</select>\r\n  );\r\n}\r\n\r\nfunction ProformaHeader(props) {\r\n  const {iddemande} = useParams();\r\n  const [error, setError] = useState(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    \r\n    fetch(\"http://127.0.0.1:3000/fournisseurproformaM?iddemande=\"+iddemande)\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => {\r\n\r\n          setIsLoaded(true);\r\n          setItems(result);\r\n\r\n        },\r\n        // Note: it's important to handle errors here\r\n        // instead of a catch() block so that we don't swallow\r\n        // exceptions from actual bugs in components.\r\n        (error) => {\r\n          \r\n          setIsLoaded(true);\r\n          setError(error);\r\n        }\r\n      )\r\n  }, [])\r\n \r\n var fournisseurs = [];\r\n  items.map((element)=>{\r\n    const line = {\"value\":element.idfournisseur,\"text\":element.nom};\r\n    fournisseurs.push(line);\r\n  })\r\n\r\n\r\n  var data_modeLivraison=[\r\n    {label: \"livraison en point relais\",value: 1},\r\n    {label: \"livraison express\",value: 2}\r\n  ]\r\n//console.log(items);\r\n    return( \r\n      <div>\r\n      <Header/>\r\n        <div className=\"col-md-6 col-sm-12 col-xs-12\">\r\n          <div className=\"x_panel\">\r\n              <div className=\"x_title\">\r\n                    <h2>Proforma <small>en tÃªte</small></h2>\r\n                    <div className=\"clearfix\"></div>\r\n                    <div className=\"x_content\">\r\n                      <form className=\"form-horizontal form-label-left\">\r\n                          <div className=\"form-group\">\r\n                            <div className=\"col-sm-9\">\r\n                              <div className=\"input-group\">\r\n                              <label className=\"col-sm-3 control-label\">reference</label>\r\n                                <input type=\"text\" className=\"form-control\" ref = {props.reference}/>\r\n                              </div>\r\n                              <div className=\"input-group\">\r\n                              <label className=\"col-sm-3 control-label\">fournisseur</label>\r\n                                <DropDown options={fournisseurs} textinput = {props.fournisseur}/>\r\n                              </div>\r\n                              <div className=\"input-group\">\r\n                                <label className=\"col-sm-3 control-label\">info livraison</label>\r\n\r\n                                <select\r\n                                  className=\"form-control\"\r\n                                  name=\"mode livraison\"\r\n                                  ref={props.mode}>\r\n                                  {data_modeLivraison.map((element, index) => (\r\n                                    <option value={element.value} key={index}>\r\n                                      {element.label}\r\n                                      \r\n                                    </option>\r\n                                  ))}\r\n                                </select>\r\n\r\n                                <input type=\"date\" className=\"form-control\" placeholder=\"date livraison\" ref = {props.date}/>\r\n                                <input type=\"text\" className=\"form-control\" placeholder=\"lieu livraison\" ref = {props.lieu}/>\r\n                              </div>\r\n\r\n                            </div>\r\n                          </div>\r\n                      </form>\r\n                    </div>\r\n              </div>\r\n          </div>      \r\n        </div>\r\n        </div>\r\n    );\r\n  }\r\n  \r\nfunction ProformaBody(props){\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"row\">\r\n      <div className=\"col-sm-2\">\r\n              <div className=\"form-group mb-3\"><label className=\"form-label\">Article</label>\r\n                  <input type=\"hidden\" value={props.idarticle} ref={props.articles_id}/>\r\n                  <input className=\"form-control\" type=\"text\" value={props.article_label} disabled/>\r\n              </div>\r\n          </div>\r\n          <div className=\"col-sm-2\">\r\n              <div className=\"form-group mb-3\"><label className=\"form-label\">prix unitaire</label><input  className=\"form-control\" type=\"number\" ref={props.prix_unit} /></div>\r\n          </div>\r\n          <div className=\"col-sm-2\">\r\n              <div className=\"form-group mb-3\"><label className=\"form-label\">quantite</label><input className=\"form-control\" type=\"number\" defaultValue={props.qtt} ref={props.quantite}/></div>\r\n          </div>\r\n          <div className=\"col-sm-2\">\r\n              <div className=\"form-group mb-3\"><label className=\"form-label\">qualite</label><input className=\"form-control\" type=\"text\" defaultValue={props.qlt} ref={props.qualite}/></div>\r\n          </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}  \r\n\r\nfunction ProformaForm() {\r\n\r\n  const {iddemande} = useParams();\r\n  const lieu_livraison = useRef(null);\r\n  const date_livraison = useRef(null);\r\n  const fournisseur = useRef(null);\r\n  const reference = useRef(null);\r\n  const mode_livraison = useRef(null);\r\n  const note_livraison = useRef(null);\r\n  const note_qualite = useRef(null);\r\n\r\n  const qualite = useRef([]);\r\n  const quantite = useRef([]);\r\n  const prix_unit = useRef([]);\r\n  const articles = useRef([]);\r\n  const idemploye=JSON.parse(sessionStorage.getItem('Appro'))[0].idemploye;\r\n  articles.current = [];\r\n  prix_unit.current = [];\r\n  qualite.current = [];\r\n  quantite.current = [];\r\n\r\n  const [error, setError] = useState(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [items, setItems] = useState([]);\r\n  useEffect(() => {\r\n    \r\n    fetch(\"http://127.0.0.1:3000/articlesproforma?iddemande=\"+iddemande)\r\n      .then(res => res.json())\r\n      .then(\r\n        (result) => {\r\n\r\n          setIsLoaded(true);\r\n          setItems(result);\r\n\r\n        },\r\n        // Note: it's important to handle errors here\r\n        // instead of a catch() block so that we don't swallow\r\n        // exceptions from actual bugs in components.\r\n        (error) => {\r\n          \r\n          setIsLoaded(true);\r\n          setError(error);\r\n        }\r\n      )\r\n  }, [])\r\n  var elements = [];\r\n  items.map((element)=>{\r\n    const line = {\"value\":element.idarticle_fixed,\"text\":element.nom_article,\"quantite\":element.qtt,\"qualite\":element.qualite};\r\n    elements.push(line);\r\n  })\r\n\r\n  function handlePrix(el){\r\n    if(el && !prix_unit.current.includes(el)){\r\n      prix_unit.current.push(el);\r\n    }\r\n  };\r\n  \r\n  function handleArticle(el){\r\n    if(el && !articles.current.includes(el)){\r\n      articles.current.push(el);\r\n    }\r\n  };\r\n\r\n  function handleQuantite(el){\r\n    if(el && !quantite.current.includes(el)){\r\n      quantite.current.push(el);\r\n    }\r\n\r\n  };\r\n  \r\n  function handleQualite(el){\r\n    if(el && !qualite.current.includes(el)){\r\n      qualite.current.push(el);\r\n    }\r\n\r\n  };\r\n\r\n  function handleEvent(event){\r\n    /*const j =  {\"idproformat\":null,\"ref\":\"PROF1234\",\"date_livraison\":\"2022-11-20\",\"lieu_livraison\":\"Anjanahary\",\"mode_livraison_id\":2,\"iddemande_proforma\":1,\"idfournisseur\":1,\r\n\"details_proforma\":[\r\n    {\"proformat_id\":1 ,\"articles_fixed_id\":1,\"pu\":11000 ,\"qtt\":5 ,\"qualite\":\"made in france\"},\r\n    {\"proformat_id\":1 ,\"articles_fixed_id\":2,\"pu\":12000 ,\"qtt\":5 ,\"qualite\":\"made in china\"}\r\n]\r\n};*/\r\n  const header = {idproformat:null,idemploye:idemploye,ref:reference.current.value,date_livraison:date_livraison.current.value,lieu_livraison:lieu_livraison.current.value,mode_livraison_id:mode_livraison.current.value,iddemande_proforma:iddemande,idfournisseur:fournisseur.current.value,details_proforma:[],note_livraison:note_livraison.current.value,note_qualite:note_qualite.current.value};\r\n  const details = [];  \r\n   for (let index = 0; index < articles.current.length; index++) {\r\n          const line = {proformat_id:id_proforma,articles_fixed_id:articles.current[index].value,pu:prix_unit.current[index].value,qtt:quantite.current[index].value,qualite:qualite.current[index].value};\r\n          details.push(line);\r\n      }\r\n\r\n      header.details_proforma = details;\r\n      console.log(header);\r\n      event.preventDefault();\r\n    \r\n      var content= {\r\n          method: 'POST',\r\n          headers: {\r\n              'Content-Type': 'application/json'\r\n          }\r\n      }\r\n      \r\n      content.body=JSON.stringify(header)\r\n      fetch('http://127.0.0.1:3000/proforma', content).then(response => {\r\n          if(response.status===400){\r\n              alert(\"Failed\")\r\n          }else\r\n              alert(\"Success\")\r\n      })\r\n      \r\n\r\n      console.log(header);\r\n\r\n  };\r\n\r\n /* const HandleLogin=(event) =>{\r\n    event.preventDefault();\r\n    \r\n    var content= {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n\r\n    content.body=JSON.stringify({email:email.current.value,pwd:pwd.current.value})\r\n    fetch('http://127.0.0.1:3000/loginDepartement', content).then(response => {\r\n        if(response.status===400){\r\n            alert(\"Mot de passe non identifier\")\r\n        }else\r\n            return response.json()\r\n    })\r\n    .then(json => { setInfo_Employe(json) })\r\n}*/\r\n\r\n\r\n    return (\r\n      <div>\r\n      \r\n        <div className=\"row\">\r\n            <ProformaHeader name=\"header\" mode={mode_livraison} reference={reference} date={date_livraison} lieu={lieu_livraison} fournisseur={fournisseur}/>\r\n        </div>\r\n        <div className=\"row\">\r\n\r\n            {\r\n              elements.map((el,index)=>{\r\n                  return(\r\n                    <ProformaBody key={index} idarticle={el.value} article_label={el.text} articles_id={handleArticle} prix_unit={handlePrix} qualite={handleQualite} quantite={handleQuantite} qtt={el.quantite} qlt={el.qualite}/>                        \r\n                  )\r\n              })\r\n            }\r\n        \r\n        <div className=\"row\">\r\n        <h1>Notes</h1>\r\n          <div className=\"col-sm-4\">\r\n              <div className=\"form-group mb-3\"><label className=\"form-label\">note livraison</label><input  className=\"form-control\" type=\"text\" ref={note_livraison}/></div>\r\n          </div>\r\n          <div className=\"col-sm-4\">\r\n              <div className=\"form-group mb-3\"><label className=\"form-label\">note qualite</label><input className=\"form-control\" type=\"text\" ref={note_qualite}/></div>\r\n          </div>\r\n      </div>\r\n\r\n            <div className=\"col-sm-3\">\r\n              <input className=\"btn btn-primary\" type=\"submit\" value=\"valider\" onClick={handleEvent}/>\r\n            </div>\r\n        </div>\r\n\r\n      \r\n      </div>\r\n \r\n    );\r\n  }\r\n\r\nexport default ProformaForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}